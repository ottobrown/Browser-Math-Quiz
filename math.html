<!DOCTYPE html>
<html lang="en">


<head>
    <title>Math</title>
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/7/7b/Math.png">
    <!--Placeholder png from wikimedia-->
</head>
<body>  

<style>
    b {
    text-align: center; font-size: 50px; font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif
    }

    input {
        font-size: 50px; height: 50px; width: 75px; font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    }


</style>

    <b id="question">TEXT</b>
    <input id="answer" type="text">
    <h1 id="correctOutOfTotal">0 out of 0 (100%)</h1>
    <br>
    <button style="background-color: cornflowerblue;"" id="multiplyToggle" onclick="updateOperators(0, 'multiplyToggle')">Multiplication</button>
    <button style="background-color: cornflowerblue;"" id="divideToggle" onclick="updateOperators(1, 'divideToggle')">Divison</button>
    <button style="background-color: cornflowerblue;"" id="addToggle" onclick="updateOperators(2, 'addToggle')">Addition</button>
    <button style="background-color: cornflowerblue;"" id="substractToggle" onclick="updateOperators(3, 'substractToggle')">Subtraction</button>

<script>
/* 
Things I want to add:
    - a display of how many questions the user has got right and wrong so far
    - multiple lengths for questions 
        - an option to allow it for the same operator (a + b + c)
        - or with multiple varibles (a + b - c)
    - better styling
*/

    document.addEventListener("keydown", fetchAnswer)
    var correctAnswer, operators, rightAnswers, wrongAnswers
    operators = [1, 1, 1, 1]
    rightAnswers = 0
    wrongAnswers = 0
    
    function updateOperators(swap, myid) {
        // 0 = * | 1 = / | 2 = + | 3 = - |
        operators[swap] = Math.abs(operators[swap] - 1)
        let swapbutton = document.getElementById(myid).style.backgroundColor
        if (swapbutton == 'cornflowerblue') {document.getElementById(myid).style.background = "grey"}
        else {document.getElementById(myid).style.background = "cornflowerblue"}
    }


    function fetchAnswer(key) {
        // paramater 'key' is for ASCII keycodes
        if (key.keyCode == "13") {
            // keycode 13 is the enter key
            let answer = document.getElementById("answer").value
            // id 'answer' is the answer textbox
            answer = parseInt(answer)
            document.getElementById("answer").value = ''
            if (answer == correctAnswer) {
                console.log("Correct")
                rightAnswers ++
                score()
                generateQuestion()
            }   
            else {
                console.log("Incorrect")
                wrongAnswers ++
                score()
                // put 'incorrect' on the screen in red
            }
            }
        }

    function score() {

        let totalAnswers = rightAnswers + wrongAnswers
        let percent = Math.floor((rightAnswers / totalAnswers) * 100)
        document.getElementById("correctOutOfTotal").innerHTML = rightAnswers + ' out of ' + totalAnswers + '(' + percent + '%)'
    }
    function generateQuestion() {
        let chosenop = Math.floor(Math.random() * 4)
        if (operators[chosenop] == 1) {
            if (chosenop == 0) {multiply()}
            if (chosenop == 1)  {divide()}
            if (chosenop == 2) {add()}
            if (chosenop == 3) {subtract()}
    // 0 = * | 1 = / | 2 = + | 3 = - |
        }
        else {
            generateQuestion()
        }
    }

    function multiply() {
        let num0 = Math.floor(Math.random() * 12)
        num0 = num0 + 1
        let num1 = Math.floor(Math.random() * 12)
        num1 = num1 + 1 
        correctAnswer = num0 * num1 
        document.getElementById("question").innerHTML = num0 + ' x ' + num1 + ' = ' 
    }

    function divide() {
        let num0 = Math.floor(Math.random() * 12)
        num0 = num0 + 1
        let num1 = Math.floor(Math.random() * 12)
        num1 = num1 + 1
        let num2 = num0 * num1
        correctAnswer = num0  
        document.getElementById("question").innerHTML = num2 + ' รท ' + num1 + ' = ' 
    }

    function add() {
        let num0 = Math.floor(Math.random() * 12)
        num0 = num0 + 1
        let num1 = Math.floor(Math.random() * 12)
        num1 = num1 + 1 
        correctAnswer = num0 +  num1 
        document.getElementById("question").innerHTML = num0 + ' + ' + num1 + ' = ' 
    }

    function subtract() {
        let num0 = Math.floor(Math.random() * 12)
        num0 = num0 + 1
        let num1 = Math.floor(Math.random() * 12)
        num1 = num1 + 1 
        let num2 = num0 + num1
        correctAnswer = num0 
        document.getElementById("question").innerHTML = num2 + ' - ' + num1 + ' = ' 
    }


    generateQuestion()
</script>

</body>
</html>